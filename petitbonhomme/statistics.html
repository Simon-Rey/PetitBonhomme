---
layout: default
title: PetitBonhomme | Statistics
extra_html_head: <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
---

<h1>Statistics</h1>

<div class="graph-comparison-wrap">
    <div class="graph-wrap">
        <h3>Wardrobe</h3>
        <canvas id="wardrobeColorDoughnutChart"></canvas>
    </div>

    <div class="graph-wrap">
        <h3>Worn Items</h3>
        <canvas id="wornColorDoughnutChart"></canvas>
    </div>

</div>

<script>
const wardrobeColorData = {{ site.data.wardrobe_color_count | raw }};

// Prepare data for the inner ring (families)
const wardrobeFamColorLabels = wardrobeColorData.map(family => family.family);
const wardrobeFamColorCounts = wardrobeColorData.map(family => family.total);
const wardrobeFamColors = wardrobeColorData.map(family => family.hex);

// Prepare data for the outer ring (individual colors within families)
const wardrobeColorLabels = [];
const wardrobeColorCounts = [];
const wardrobeColorHexValues = [];

wardrobeColorData.forEach(family => {
  family.colors.forEach(color => {
    wardrobeColorLabels.push(color.name);
    wardrobeColorCounts.push(color.count);
    wardrobeColorHexValues.push(color.hex);
  });
});

const wardrobeColorDoughnutChart = document.getElementById('wardrobeColorDoughnutChart').getContext('2d');
new Chart(wardrobeColorDoughnutChart, {
  type: 'doughnut',
  data: {
    labels: [...wardrobeFamColorLabels, ...wardrobeColorLabels],
    datasets: [
      {
        label: 'Families',
        data: wardrobeFamColorCounts,
        backgroundColor: wardrobeFamColors,
        hoverOffset: 4
      },
      {
        label: 'Colors',
        data: wardrobeColorCounts,
        backgroundColor: wardrobeColorHexValues,
        hoverOffset: 4
      }
    ]
  },
  options: {
    responsive: true,
    cutout: '50%',
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          title: function(tooltipItems) {
            const tooltipItem = tooltipItems[0];
            const datasetIndex = tooltipItem.datasetIndex;
            const dataIndex = tooltipItem.dataIndex;

            // Retrieve correct label
            const label = datasetIndex === 0
                ? wardrobeFamColorLabels[dataIndex] // Family label
                : wardrobeColorLabels[dataIndex]; // Color label

            return `${label}`;
          },
          label: function(tooltipItem) {
            const datasetIndex = tooltipItem.datasetIndex;
            const dataIndex = tooltipItem.dataIndex;

            // Retrieve correct label
            const label = datasetIndex === 0
                ? wardrobeFamColorLabels[dataIndex] // Family label
                : wardrobeColorLabels[dataIndex]; // Color label

            const count = tooltipItem.raw;
            return datasetIndex === 0
                ? ` ${label} Family: ${count} items`
                : ` ${label}: ${count} items`;
          }
        }
      }
    }
  }
});


const wornColorData = {{ site.data.worn_color_count | raw }};

// Prepare data for the inner ring (families)
const wornFamColorLabels = wornColorData.map(family => family.family);
const wornFamColorCounts = wornColorData.map(family => family.total);
const wornFamColors = wornColorData.map(family => family.hex);

// Prepare data for the outer ring (individual colors within families)
const wornColorLabels = [];
const wornColorCounts = [];
const wornColorHexValues = [];

wornColorData.forEach(family => {
  family.colors.forEach(color => {
    wornColorLabels.push(color.name);
    wornColorCounts.push(color.count);
    wornColorHexValues.push(color.hex);
  });
});

const wornColorDoughnutChart = document.getElementById('wornColorDoughnutChart').getContext('2d');
new Chart(wornColorDoughnutChart, {
  type: 'doughnut',
  data: {
    labels: [...wornFamColorLabels, ...wornColorLabels],
    datasets: [
      {
        label: 'Families',
        data: wornFamColorCounts,
        backgroundColor: wornFamColors,
        hoverOffset: 4
      },
      {
        label: 'Colors',
        data: wornColorCounts,
        backgroundColor: wornColorHexValues,
        hoverOffset: 4
      }
    ]
  },
  options: {
    responsive: true,
    cutout: '50%',
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          title: function(tooltipItems) {
            const tooltipItem = tooltipItems[0];
            const datasetIndex = tooltipItem.datasetIndex;
            const dataIndex = tooltipItem.dataIndex;

            // Retrieve correct label
            const label = datasetIndex === 0
                ? wornFamColorLabels[dataIndex] // Family label
                : wornColorLabels[dataIndex]; // Color label

            return `${label}`;
          },
          label: function(tooltipItem) {
            const datasetIndex = tooltipItem.datasetIndex;
            const dataIndex = tooltipItem.dataIndex;

            // Retrieve correct label
            const label = datasetIndex === 0
                ? wornFamColorLabels[dataIndex] // Family label
                : wornColorLabels[dataIndex]; // Color label

            const count = tooltipItem.raw;
            return datasetIndex === 0
                ? ` ${label} Family: ${count} wears`
                : ` ${label}: ${count} wears`;
          }
        }
      }
    }
  }
});

</script>

